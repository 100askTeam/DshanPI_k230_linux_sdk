From 979a7c52431959cf0e0c47ace48fffab7932d6e7 Mon Sep 17 00:00:00 2001
From: wangjianxin <wangjianxin@canaan-creative.com>
Date: Fri, 14 Jun 2024 14:00:35 +0800
Subject: [PATCH] dts add bootargs

---
 arch/riscv/boot/dts/canaan/k230.dtsi       | 2 ++
 arch/riscv/boot/dts/canaan/k230d-canmv.dts | 7 +++++++
 2 files changed, 9 insertions(+)

diff --git a/arch/riscv/boot/dts/canaan/k230.dtsi b/arch/riscv/boot/dts/canaan/k230.dtsi
index a50b320b7..13b8f4bea 100644
--- a/arch/riscv/boot/dts/canaan/k230.dtsi
+++ b/arch/riscv/boot/dts/canaan/k230.dtsi
@@ -197,6 +197,7 @@ usb0: usb@91500000 {
 			g-rx-fifo-size = <512>;
 			g-np-tx-fifo-size = <64>;
 			g-tx-fifo-size = <512 1024 64 64 64 64>;
+			status = "disabled";
 		};
 
 		usb1: usb@91540000 {
@@ -208,6 +209,7 @@ usb1: usb@91540000 {
 			g-rx-fifo-size = <512>;
 			g-np-tx-fifo-size = <64>;
 			g-tx-fifo-size = <512 1024 64 64 64 64>;
+			status = "disabled";
 		};
 		mmc_sd1: sdhci1@91581000 {
 			compatible = "kendryte,k230-dw-mshc";
diff --git a/arch/riscv/boot/dts/canaan/k230d-canmv.dts b/arch/riscv/boot/dts/canaan/k230d-canmv.dts
index 6c277dd22..4913c672d 100644
--- a/arch/riscv/boot/dts/canaan/k230d-canmv.dts
+++ b/arch/riscv/boot/dts/canaan/k230d-canmv.dts
@@ -11,6 +11,7 @@ / {
 
 	chosen {
 		stdout-path = "serial0:115200n8";
+		bootargs = "root=/dev/mmcblk0p2 loglevel=8 rw rootdelay=4 rootfstype=ext4 console=ttyS0,115200  earlycon=sbi";
 	};
 
 	ddr: memory@0 {
@@ -27,4 +28,10 @@ &mmc_sd1{
     no-1-8-v;
     cap-sd-highspeed;
     mshc_ctrl_r = <0x00>;
+};
+&usb0 {
+	status = "okay";
+};
+&usb1 {
+	status = "okay";
 };
\ No newline at end of file
-- 
2.39.1

