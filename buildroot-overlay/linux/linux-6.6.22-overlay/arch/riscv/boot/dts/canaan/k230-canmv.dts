// SPDX-License-Identifier: GPL-2.0 OR MIT
/*
 * Copyright (C) 2024 Yangyu Chen <cyy@cyyself.name>
 */

#include "k230.dtsi"

/ {
	model = "Canaan CanMV-K230";
	compatible = "canaan,canmv-k230", "canaan,kendryte-k230";

	chosen {
		stdout-path = "serial0:115200n8";
	};

	ddr: memory@0 {
		device_type = "memory";
		reg = <0x0 0x0 0x0 0x20000000>;
	};

	sound {
		status                      = "okay";
		compatible                  = "canaan,k230-audio-inno";
		canaan,model                = "CANAAN_K230_I2S_INNO";
		canaan,k230-i2s-controller  = <&i2s>;
		canaan,k230-audio-codec     = <&inno_codec>;
	};
};

&uart0 {
	status = "okay";
};

&i2c3 {
	status = "okay";

	sensor0: ov5647@36 {
		compatible = "ovti,ov5647";
		reg = <0x36>;
		clocks = <&sensor_mclk0>;
		pwdn-gpios = <&port0 0 GPIO_ACTIVE_HIGH>;

		port {
			camera0_out: endpoint {
				remote-endpoint = <&vvcam_isp_dvp0>;
			};
		};
	};
};

&vvcam_isp_0 {
	ports {
		port@0 {
			reg = <0>;
			vvcam_isp_dvp0: endpoint {
				remote-endpoint = <&camera0_out>;
			};
		};
	};
};

&gpio0 {
	status = "okay";
};

&gpio9 {
	status = "okay";
};

&gpio31 {
	status = "okay";
};
&mmc_sd1{
    status = "okay";
    no-1-8-v;
    cap-sd-highspeed;
    mshc_ctrl_r = <0x00>;
};
