From 1705102e3ed372971e1700fb5e1ac7e53e5c8036 Mon Sep 17 00:00:00 2001
From: wangjianxin <wangjianxin@canaan-creative.com>
Date: Thu, 13 Jun 2024 18:21:11 +0800
Subject: [PATCH 19/20] usb net enable

---
 arch/riscv/configs/k230_defconfig | 108 ++++++++++++------------------
 1 file changed, 41 insertions(+), 67 deletions(-)

diff --git a/arch/riscv/configs/k230_defconfig b/arch/riscv/configs/k230_defconfig
index 6550bf7a6..ec69b4671 100644
--- a/arch/riscv/configs/k230_defconfig
+++ b/arch/riscv/configs/k230_defconfig
@@ -3,6 +3,7 @@ CONFIG_POSIX_MQUEUE=y
 CONFIG_NO_HZ_IDLE=y
 CONFIG_HIGH_RES_TIMERS=y
 CONFIG_BPF_SYSCALL=y
+CONFIG_BPF_JIT=y
 CONFIG_IKCONFIG=y
 CONFIG_IKCONFIG_PROC=y
 CONFIG_CGROUPS=y
@@ -27,29 +28,24 @@ CONFIG_EXPERT=y
 CONFIG_PROFILING=y
 CONFIG_SOC_MICROCHIP_POLARFIRE=y
 CONFIG_ARCH_RENESAS=y
-CONFIG_ARCH_THEAD=y
 CONFIG_SOC_SIFIVE=y
 CONFIG_SOC_STARFIVE=y
 CONFIG_ARCH_SUNXI=y
+CONFIG_ARCH_THEAD=y
 CONFIG_SOC_VIRT=y
 CONFIG_ARCH_CANAAN=y
 CONFIG_SMP=y
-CONFIG_HOTPLUG_CPU=y
-CONFIG_PM=y
-CONFIG_CPU_IDLE=y
 CONFIG_VIRTUALIZATION=y
 CONFIG_KVM=m
 CONFIG_ACPI=y
 CONFIG_JUMP_LABEL=y
+# CONFIG_STRICT_KERNEL_RWX is not set
 CONFIG_MODULES=y
 CONFIG_MODULE_UNLOAD=y
 CONFIG_SPARSEMEM_MANUAL=y
-CONFIG_BLK_DEV_THROTTLING=y
 CONFIG_NET=y
 CONFIG_PACKET=y
-CONFIG_UNIX=y
 CONFIG_XFRM_USER=m
-CONFIG_INET=y
 CONFIG_IP_MULTICAST=y
 CONFIG_IP_ADVANCED_ROUTER=y
 CONFIG_IP_PNP=y
@@ -102,7 +98,16 @@ CONFIG_PCIE_XILINX=y
 CONFIG_PCIE_FU740=y
 CONFIG_DEVTMPFS=y
 CONFIG_DEVTMPFS_MOUNT=y
+CONFIG_MTD=y
+CONFIG_MTD_TESTS=m
+CONFIG_MTD_BLOCK=y
+CONFIG_MTD_SLRAM=m
+CONFIG_MTD_PHRAM=m
+CONFIG_MTD_SPI_NAND=y
+CONFIG_MTD_SPI_NOR=y
+CONFIG_MTD_UBI=y
 CONFIG_BLK_DEV_LOOP=y
+CONFIG_BLK_DEV_NBD=y
 CONFIG_VIRTIO_BLK=y
 CONFIG_BLK_DEV_NVME=m
 CONFIG_BLK_DEV_SD=y
@@ -125,7 +130,9 @@ CONFIG_MACB=y
 CONFIG_E1000E=y
 CONFIG_R8169=y
 CONFIG_STMMAC_ETH=y
+CONFIG_DWMAC_THEAD=m
 CONFIG_MICROSEMI_PHY=y
+CONFIG_USB_RTL8152=y
 CONFIG_INPUT_MOUSEDEV=y
 CONFIG_KEYBOARD_SUN4I_LRADC=m
 CONFIG_SERIAL_8250=y
@@ -141,22 +148,27 @@ CONFIG_SPI=y
 CONFIG_SPI_DW_QUAD=y
 CONFIG_SPI_DESIGNWARE=y
 CONFIG_SPI_DW_MMIO=y
-CONFIG_SPI_SPIDEV=y
 CONFIG_SPI_SIFIVE=y
 CONFIG_SPI_SUN6I=y
+CONFIG_SPI_SPIDEV=y
 # CONFIG_PTP_1588_CLOCK is not set
+CONFIG_GPIO_DWAPB=y
 CONFIG_GPIO_SIFIVE=y
+CONFIG_GPIO_PCA953X=y
+CONFIG_GPIO_PCA953X_IRQ=y
+CONFIG_SENSORS_MR75203=m
+CONFIG_SENSORS_PWM_FAN=m
+CONFIG_CPU_THERMAL=y
+CONFIG_THERMAL_EMULATION=y
 CONFIG_WATCHDOG=y
 CONFIG_SUNXI_WATCHDOG=y
 CONFIG_REGULATOR=y
 CONFIG_REGULATOR_FIXED_VOLTAGE=y
-CONFIG_DRM=m
 CONFIG_DRM_RADEON=m
 CONFIG_DRM_NOUVEAU=m
 CONFIG_DRM_SUN4I=m
 CONFIG_DRM_VIRTIO_GPU=m
 CONFIG_FB=y
-CONFIG_FRAMEBUFFER_CONSOLE=y
 CONFIG_USB=y
 CONFIG_USB_XHCI_HCD=y
 CONFIG_USB_XHCI_PLATFORM=y
@@ -168,13 +180,19 @@ CONFIG_USB_STORAGE=y
 CONFIG_USB_UAS=y
 CONFIG_USB_MUSB_HDRC=m
 CONFIG_USB_MUSB_SUNXI=m
+CONFIG_USB_DWC3=m
+CONFIG_USB_DWC3_HOST=y
+CONFIG_USB_DWC2=y
+CONFIG_USB_ONBOARD_HUB=m
 CONFIG_NOP_USB_XCEIV=m
+CONFIG_USB_GADGET=m
+CONFIG_TYPEC=m
 CONFIG_MMC=y
 CONFIG_MMC_SDHCI=y
 CONFIG_MMC_SDHCI_PLTFM=y
-CONFIG_MMC_SDHCI_CADENCE=y
 CONFIG_MMC_SDHCI_OF_DWCMSHC=y
-MMC_SDHCI_OF_DWCMSHC_KENDRYTE=y
+CONFIG_MMC_SDHCI_OF_DWCMSHC_KENDRYTE=y
+CONFIG_MMC_SDHCI_CADENCE=y
 CONFIG_MMC_SPI=y
 CONFIG_MMC_SUNXI=y
 CONFIG_RTC_CLASS=y
@@ -188,20 +206,28 @@ CONFIG_VIRTIO_BALLOON=y
 CONFIG_VIRTIO_INPUT=y
 CONFIG_VIRTIO_MMIO=y
 CONFIG_SUN8I_DE2_CCU=m
+CONFIG_CLK_TH1520_FM=y
+CONFIG_MAILBOX=y
 CONFIG_SUN50I_IOMMU=y
 CONFIG_RPMSG_CHAR=y
 CONFIG_RPMSG_CTRL=y
 CONFIG_RPMSG_VIRTIO=y
-CONFIG_ARCH_R9A07G043=y
+CONFIG_IIO=y
+CONFIG_THEAD_TH1520_ADC=m
+CONFIG_PWM=y
+CONFIG_PWM_THEAD=m
 CONFIG_PHY_SUN4I_USB=m
 CONFIG_LIBNVDIMM=y
 CONFIG_NVMEM_SUNXI_SID=y
+CONFIG_TEE=y
+CONFIG_OPTEE=y
 CONFIG_EXT4_FS=y
 CONFIG_EXT4_FS_POSIX_ACL=y
 CONFIG_EXT4_FS_SECURITY=y
 CONFIG_BTRFS_FS=m
 CONFIG_BTRFS_FS_POSIX_ACL=y
 CONFIG_AUTOFS_FS=y
+CONFIG_FUSE_FS=y
 CONFIG_OVERLAY_FS=m
 CONFIG_ISO9660_FS=y
 CONFIG_JOLIET=y
@@ -241,65 +267,13 @@ CONFIG_DEBUG_SPINLOCK=y
 CONFIG_DEBUG_MUTEXES=y
 CONFIG_DEBUG_RWSEMS=y
 CONFIG_DEBUG_ATOMIC_SLEEP=y
+CONFIG_LOCK_TORTURE_TEST=m
 CONFIG_DEBUG_LIST=y
 CONFIG_DEBUG_PLIST=y
 CONFIG_DEBUG_SG=y
+CONFIG_RCU_TORTURE_TEST=m
 # CONFIG_RCU_TRACE is not set
 CONFIG_RCU_EQS_DEBUG=y
 # CONFIG_FTRACE is not set
 # CONFIG_RUNTIME_TESTING_MENU is not set
 CONFIG_MEMTEST=y
-# Enable TEE
-CONFIG_TEE=y
-CONFIG_OPTEE=y
-CONFIG_RCU_TORTURE_TEST=m
-CONFIG_LOCK_TORTURE_TEST=m
-CONFIG_TORTURE_TEST=m
-CONFIG_BLK_DEV_NBD=y
-CONFIG_FUSE_FS=y
-CONFIG_STRICT_KERNEL_RWX=n
-# Enable BPF_JIT & TEST_BPF
-CONFIG_BPF_JIT=y
-CONFIG_RUNTIME_TESTING_MENU=y
-CONFIG_TEST_BPF=m
-# TH1520
-CONFIG_PINCTRL_TH1520=y
-# TH1520 PWM
-CONFIG_PWM=y
-CONFIG_PWM_THEAD=m
-# TH1520 dwmac
-CONFIG_DWMAC_THEAD=m
-# TH1520 GPIO
-CONFIG_GPIO_DWAPB=y
-CONFIG_GPIO_PCA953X=y
-CONFIG_GPIO_PCA953X_IRQ=y
-# TH1520 cpu thermal
-CONFIG_CPU_THERMAL=y
-CONFIG_THERMAL_EMULATION=y
-CONFIG_SENSORS_MR75203=m
-CONFIG_SENSORS_PWM_FAN=m
-# TH1520 USB
-CONFIG_USB_DWC3=m
-CONFIG_USB_DWC3_HOST=y
-CONFIG_USB_ONBOARD_HUB=m
-CONFIG_USB_GADGET=m
-CONFIG_TYPEC=m
-CONFIG_USB_ROLE_SWITCH=m
-CONFIG_IIO=y
-CONFIG_THEAD_TH1520_ADC=m
-# TH1520 CLOCK
-CONFIG_CLK_TH1520_FM=y
-CONFIG_MTD=y
-CONFIG_MTD_TESTS=m
-CONFIG_MTD_BLOCK=y
-CONFIG_MTD_SLRAM=m
-CONFIG_MTD_PHRAM=m
-CONFIG_MTD_SPI_NAND=y
-CONFIG_MTD_SPI_NOR=y
-CONFIG_MTD_UBI=y
-# TH1520 MAILBOX
-CONFIG_MAILBOX=y
-CONFIG_USB_RTL8152=m
-CONFIG_USB_DWC2=m
-CONFIG_USB_GADGET=m
-
-- 
2.39.1

